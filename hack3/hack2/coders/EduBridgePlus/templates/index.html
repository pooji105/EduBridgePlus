<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduBridge+ - Learn. Act. Impact.</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="AI-powered learning platform for sustainability aligned with SDG 4, 6, and 13">
    <meta name="theme-color" content="#4caf50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="EduBridge+">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNCIgZmlsbD0idXJsKCNncmFkaWVudDBfbGluZWFyXzFfMSkiLz4KPHA+PC9wYXRoPgo8cGF0aCBkPSJNMTYgOEMxMy43OTA5IDggMTIgOS43OTA5IDEyIDEyVjIwQzEyIDIyLjIwOTEgMTMuNzkwOSAyNCAxNiAyNEMxOC4yMDkxIDI0IDIwIDIyLjIwOTEgMjAgMjBWMTJDMjAgOS43OTA5IDE4LjIwOTEgOCAxNiA4WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC45Ii8+CjxwYXRoIGQ9Ik0xNCAxMkgxOFYyMEgxNFYxMloiIGZpbGw9IiM0Q0FGNTAiLz4KPHA+PC9wYXRoPgo8cGF0aCBkPSJNMTQgMTZIMThWMjBIMTRWMTZaIiBmaWxsPSIjMjE5NkYzIi8+CjxwYXRoPgo8L3BhdGg+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF9saW5lYXJfMV8xIiB4MT0iMCIgeTE9IjAiIHgyPSIzMiIgeTI9IjMyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiM0Q0FGNTAiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMjE5NkYzIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1>EduBridge+</h1>
                    <p class="tagline">Learn. Act. Impact.</p>
                </div>
                <div class="user-info">
                    <span class="welcome-text">Welcome, {{ current_user.username }}!</span>
                    <a href="{{ url_for('logout') }}" class="btn btn-outline-light btn-sm ms-3">
                        <i class="fas fa-sign-out-alt me-1"></i>Logout
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="content">
            <h2>AI Learning Platform for Sustainability</h2>
            <p class="intro">Empowering learners to tackle global challenges through AI-driven education. Our platform focuses on Sustainable Development Goals 4 (Quality Education), 6 (Clean Water), and 13 (Climate Action) to create meaningful impact in our world.</p>
            
            <!-- Topics Section -->
            <div class="topics-section mb-5">
                <h3 class="text-center mb-4">Explore Topics</h3>
                <div class="row g-4">
                    <div class="col-lg-4 col-md-6">
                        <div class="topic-card" onclick="window.location.href='/topic/Climate_Change'">
                            <div class="topic-icon">
                                <i class="fas fa-thermometer-half"></i>
                            </div>
                            <h4>Climate Change</h4>
                            <p>Understanding global warming and its environmental impacts</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="topic-card" onclick="window.location.href='/topic/Water_Pollution'">
                            <div class="topic-icon">
                                <i class="fas fa-tint"></i>
                            </div>
                            <h4>Water Pollution</h4>
                            <p>Protecting our water resources and marine ecosystems</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="topic-card" onclick="window.location.href='/topic/Renewable_Energy'">
                            <div class="topic-icon">
                                <i class="fas fa-solar-panel"></i>
                            </div>
                            <h4>Renewable Energy</h4>
                            <p>Clean energy solutions for a sustainable future</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="topic-card" onclick="window.location.href='/topic/Deforestation'">
                            <div class="topic-icon">
                                <i class="fas fa-tree"></i>
                            </div>
                            <h4>Deforestation</h4>
                            <p>Forest conservation and biodiversity protection</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="topic-card" onclick="window.location.href='/topic/Waste_Management'">
                            <div class="topic-icon">
                                <i class="fas fa-recycle"></i>
                            </div>
                            <h4>Waste Management</h4>
                            <p>Reducing, reusing, and recycling for a cleaner planet</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="topic-card" onclick="window.location.href='/topic/Sustainable_Agriculture'">
                            <div class="topic-icon">
                                <i class="fas fa-seedling"></i>
                            </div>
                            <h4>Sustainable Agriculture</h4>
                            <p>Eco-friendly farming practices and food security</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="cta-section">
                <a href="/learn" class="btn primary-btn">Start Learning</a>
                <a href="/dashboard" class="btn">View Dashboard</a>
                <a href="/community" class="btn">Community</a>
                <a href="/leaderboard" class="btn">Leaderboard</a>
                <a href="/analytics" class="btn">Analytics</a>
                <button id="install-btn" class="btn install-btn" style="display: none;">ðŸ“± Install App</button>
            </div>
        </div>
    </div>

    <script>
        // PWA Installation
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-btn').style.display = 'inline-block';
        });
        
        document.getElementById('install-btn').addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`User response to the install prompt: ${outcome}`);
                deferredPrompt = null;
                document.getElementById('install-btn').style.display = 'none';
            }
        });
        
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/service-worker.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
